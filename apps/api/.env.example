# =============================================================================
# SIDRA API - Environment Configuration
# =============================================================================
# SECURITY WARNING: Never commit actual values to version control!
# Copy this file to .env and fill in the values for your environment.
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED VARIABLES (API will fail to start without these)
# -----------------------------------------------------------------------------

# Server Configuration
PORT=4000
NODE_ENV=development  # development | staging | production

# Database Connection (PostgreSQL)
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/sidra_dev"

# SECURITY: JWT Secret (REQUIRED)
# Generate: openssl rand -base64 64
# CRITICAL: Use different secrets for each environment!
JWT_SECRET="CHANGE_ME_IN_PRODUCTION_USE_OPENSSL_RAND"

# SECURITY: Encryption Key (REQUIRED)
# Used for encrypting sensitive data at rest (e.g., meeting links)
# MUST be exactly 32 characters for AES-256
# Generate: openssl rand -base64 32 | tr -d '\n' | cut -c1-32
ENCRYPTION_KEY="CHANGE_ME_32_CHARS_EXACTLY______"

# SECURITY: OTP Secret (REQUIRED for email verification)
# Used for HMAC-SHA256 hashing of OTP codes during registration
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# CRITICAL: Use different secrets for each environment!
OTP_SECRET="CHANGE_ME_IN_PRODUCTION_USE_NODE_CRYPTO"

# SECURITY: CORS Configuration (REQUIRED)
# Comma-separated list of allowed origins (no spaces)
# Development:
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3002
# Production example:
# ALLOWED_ORIGINS=https://app.sidra-ai.com,https://admin.sidra-ai.com

# -----------------------------------------------------------------------------
# RECOMMENDED VARIABLES
# -----------------------------------------------------------------------------

# Frontend URL (for email links, notifications, OAuth redirects)
FRONTEND_URL=http://localhost:3002
# Production: FRONTEND_URL=https://app.sidra-ai.com

# Email Configuration (SendGrid)
# Required for password reset, booking notifications, etc.
# SENDGRID_API_KEY="SG.your-api-key"
# SENDGRID_FROM_EMAIL="noreply@sidra-ai.com"
# SENDGRID_FROM_NAME="Sidra"

# -----------------------------------------------------------------------------
# FILE STORAGE (Choose one provider)
# -----------------------------------------------------------------------------

# Option 1: Cloudflare R2 (Recommended - S3-compatible, zero egress fees)
# R2_ACCOUNT_ID="your-cloudflare-account-id"
# R2_ACCESS_KEY_ID="your-r2-access-key"
# R2_SECRET_ACCESS_KEY="your-r2-secret-key"
# R2_BUCKET_NAME="sidra-uploads"
# R2_PUBLIC_URL="https://pub-xxx.r2.dev"

# Option 2: AWS S3
# AWS_ACCESS_KEY_ID="your-access-key"
# AWS_SECRET_ACCESS_KEY="your-secret-key"
# AWS_REGION="us-east-1"
# AWS_S3_BUCKET="sidra-uploads"

# Option 3: Local Storage (development only)
# UPLOAD_LOCAL_PATH="./uploads"

# -----------------------------------------------------------------------------
# GITHUB SECRETS (for CI/CD - set in GitHub repository settings)
# -----------------------------------------------------------------------------
# These are NOT set in .env - configure in GitHub Actions secrets:
#
# DATABASE_URL              - Production database connection string
# JWT_SECRET                - Production JWT secret
# ENCRYPTION_KEY            - Production encryption key
#
# Database Backups (Cloudflare R2):
# R2_ACCOUNT_ID             - Your Cloudflare account ID
# R2_BACKUP_ACCESS_KEY_ID   - R2 API token access key (create separate token for backups)
# R2_BACKUP_SECRET_ACCESS_KEY
# R2_BACKUP_BUCKET          - Bucket name for backups (e.g., sidra-backups)
#
# SENDGRID_API_KEY          - Email service
# R2_* or AWS_*             - File storage credentials
