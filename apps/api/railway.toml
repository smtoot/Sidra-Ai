# Railway configuration for Sidra API (NestJS)
# Root directory should be set to "/" in Railway settings

[build]
builder = "nixpacks"
buildCommand = "npm install && cd packages/database && npx prisma generate && cd .. && npm run build --workspace=packages/shared && npm run build --workspace=apps/api"

[deploy]
startCommand = "cd packages/database && npx prisma migrate deploy && cd ../../apps/api && npm run start:prod"
healthcheckPath = "/health"
healthcheckTimeout = 300
